import{ar as ot,as as at,at as rt,au as it,r as u,av as De,aw as Te,ax as ne,u as J,ay as In,s as A,F as z,az as lt,j as e,P as ie,G as le,aA as oe,a0 as je,aB as Re,aC as L,aD as ct,aE as dt,aF as Cn,aG as Q,C as G,T as D,af as ut,ag as ce,m as ye,aH as pt,w as te,ao as En,B as E,d as B,y as Dn,aI as _e,ah as ht,aJ as ft,a1 as mt,aK as xt,aL as gt,aM as bt,z as vt,v as Tn,aN as jt,aO as yt,aP as _t,aQ as Pt,aR as de,f as Me,b as ke,A as wt,aS as St,aT as It,aU as Ct,aV as q,aW as Et,aX as Dt,aY as Tt,aZ as se,W as Rt,a_ as Oe,a$ as F,x as H,b0 as Mt,b1 as ue,b2 as kt,h as Rn,l as Mn,b3 as Ot,b4 as zt,D as Lt,b5 as At,b6 as Bt,q as kn,b7 as Wt,b8 as Nt,b9 as Fe,ba as pe,bb as On,bc as Ft,bd as zn,g as $t,be as Ht,bf as Pe,bg as Ln,bh as Vt,bi as Ut,e as Gt,bj as Kt,bk as Xt,bl as An,bm as Yt,bn as Jt,bo as qt,L as V,Y as U,t as Zt,Q as Bn,bp as Qt,bq as es,br as Wn,bs as we,bt as ns,bu as Nn,bv as $e,bw as ts,bx as Fn,by as ss,bz as os,bA as as,bB as ze,bC as rs,bD as Se,bE as is,bF as ls,bG as xe,bH as cs,bI as ds,bJ as us,bK as ps,M as hs,Z as He,bL as Le,bM as fs,bN as ms,bO as xs,bP as ge,H as gs,bQ as Ve,bR as Ie,bS as $n,R as bs,bT as vs,bU as js,bV as Ae,bW as ys,bX as _s,bY as Ps,bZ as ws,b_ as Ce,b$ as Ss,c0 as Is,c1 as Cs,c2 as Es,a as Ds,c3 as Ts,c4 as Rs,c5 as Ee,c6 as Ms,c7 as ks,c8 as Os,c9 as Ue,a4 as zs,a5 as Ls,ca as Hn,cb as Vn,cc as Un,cd as Gn,ce as As,cf as Bs,cg as Ws,ch as Ns,ci as be}from"./sanity-e77b72cc.js";import{H as Fs,J as $s}from"./json-inspector-2382f4eb.js";function Kn(t,n){var s=typeof n=="object";return new Promise(function(a,o){var i=new ot({next:function(r){a(r),i.unsubscribe()},error:o,complete:function(){s?a(n.defaultValue):o(new at)}});t.subscribe(i)})}function Hs(){return rt(function(t,n){var s,a=!1;t.subscribe(it(n,function(o){var i=s;s=o,a&&n.next([i,o]),a=!0}))})}const Be=t=>{const{actions:n,children:s,actionProps:a,onActionComplete:o}=t;return e.jsx(Ln,{onReset:o,hooks:n,args:a,children:s})},Vs=t=>{const{badges:n,children:s,badgeProps:a,...o}=t;return e.jsx(Ln,{...o,hooks:n,args:a,children:s})},Us=[];function Gs(t){const{children:n,flatIndex:s,index:a,params:o,payload:i,siblingIndex:r}=t,{navigate:l,navigateIntent:c}=De(),d=Te(),h=u.useMemo(()=>(d==null?void 0:d.panes)||Us,[d==null?void 0:d.panes]),p=a-1,m=u.useCallback(x=>{const f=h[p]||[],v=f[r],_=x(f,v),P=[...h.slice(0,p),_,...h.slice(p+1)],I={...d||{},panes:P};return setTimeout(()=>l(I),0),I},[p,l,h,d,r]),g=u.useCallback(x=>{m((f,v)=>[...f.slice(0,r),{...v,payload:x},...f.slice(r+1)])},[m,r]),b=u.useCallback(x=>{m((f,v)=>[...f.slice(0,r),{...v,params:x},...f.slice(r+1)])},[m,r]),j=u.useCallback(x=>{let{id:f,parentRefPath:v,type:_,template:P}=x;l({panes:[...h.slice(0,p+1),[{id:f,params:{template:P.id,parentRefPath:Vt(v),type:_},payload:P.params}]]})},[p,l,h]),y=u.useMemo(()=>({index:s,groupIndex:p,siblingIndex:r,payload:i,params:o,hasGroupSiblings:h[p]?h[p].length>1:!1,groupLength:h[p]?h[p].length:0,routerPanesState:h,ChildLink:Ut,BackLink:Gt,ReferenceChildLink:Kt,handleEditReference:j,ParameterizedLink:Xt,replaceCurrent:function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m(()=>[{id:x.id||"",payload:x.payload,params:x.params||{}}])},closeCurrent:()=>{m((x,f)=>x.length>1?x.filter(v=>v!==f):x)},duplicateCurrent:x=>{m((f,v)=>{const _={...v,payload:(x==null?void 0:x.payload)||v.payload,params:(x==null?void 0:x.params)||v.params};return[...f.slice(0,r),_,...f.slice(r)]})},setView:x=>{const f=An(o,"view");return b(x?{...f,view:x}:f)},setParams:b,setPayload:g,navigateIntent:c}),[s,p,j,m,c,o,i,h,b,g,r]);return e.jsx(Yt.Provider,{value:y,children:n})}function Ks(t,n,s,a){var o,i;const r={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},l=(o=n.minWidth)!=null?o:Ee,c=(i=s.minWidth)!=null?i:Ee,d=Math.min(n.maxWidth||1/0,r.width-c),h=Math.min(s.maxWidth||1/0,r.width-l);let p=l-t.left.width;const m=t.right.width-h;p<m&&(p=m);let g=t.right.width-c;const b=d-t.left.width;g>b&&(g=b);const j=Math.min(Math.max(a,p),g),y=t.left.width+j,x=t.right.width-j,f=y/r.width*r.flex,v=x/r.width*r.flex;return{leftFlex:f,leftW:y,rightFlex:v,rightW:x}}function Xs(t,n){const s=[];let a=n;for(;a!==t;){const o=a.parentElement;if(!o)return s;const r=Array.from(o.childNodes).indexOf(a);if(s.unshift(r),o===t)return s;a=o}return s}const Ge=[];function Ys(t,n){const s=new WeakMap;for(const o of n)s.set(o,Xs(t,o));const a=(o,i)=>{const r=s.get(o)||Ge,l=s.get(i)||Ge,c=Math.max(r.length,l.length);for(let d=0;d<c;d+=1){const h=r[d]||-1,p=l[d]||-1;if(h!==p)return h-p}return 0};n.sort(a)}function Js(){const t=[],n=[],s=new WeakMap,a=new Set,o={};let i=null,r=0,l=null,c=new Map,d=!1;function h(f){a.add(f),l===f&&(l=null),x()}function p(f){a.delete(f),l=f,x()}function m(f,v){return s.set(f,{...v,original:v}),n.push(f),i&&Ys(i,n),p(f),()=>{const _=n.indexOf(f);_>-1&&n.splice(_,1),s.delete(f),x()}}function g(f,v,_){var P,I,T,S;const w=n.indexOf(v),R=s.get(v);if(!R)return;const M=n[w+1],O=s.get(M);if(O){if(f==="start"&&(d=!0,o.left={element:v,flex:R.flex||1,width:v.offsetWidth},o.right={element:M,flex:O.flex||1,width:M.offsetWidth},x()),f==="move"&&o.left&&o.right){c=new Map;const{leftW:C,rightW:k,leftFlex:W,rightFlex:N}=Ks(o,R,O,_);c.set(v,{flex:W,width:C}),c.set(M,{flex:N,width:k}),x()}if(f==="end"){d=!1;const C=c.get(v),k=c.get(M);s.set(v,{...R,currentMinWidth:0,currentMaxWidth:(P=R.maxWidth)!=null?P:1/0,flex:(I=C==null?void 0:C.flex)!=null?I:R.flex}),s.set(M,{...O,currentMinWidth:0,currentMaxWidth:(T=R.maxWidth)!=null?T:1/0,flex:(S=k==null?void 0:k.flex)!=null?S:O.flex}),c=new Map,delete o.left,delete o.right,x()}}}function b(f){i=f}function j(f){r=f,x()}function y(f){return t.push(f),()=>{const v=t.push(f);v>-1&&t.splice(v,1)}}return{collapse:h,expand:p,mount:m,resize:g,setRootElement:b,setRootWidth:j,subscribe:y};function x(){var f,v,_,P;if(!r)return;const I=[];for(const C of n)C!==l&&I.unshift(C);l&&I.unshift(l);const T=new WeakMap,S=I.length,w=I[0],R=(S-1)*be;let M=r-R;for(const C of I){const k=s.get(C);if(!k)continue;const W=k.currentMinWidth||k.minWidth||Ee,N=C===w,fe=a.has(C),me=W>M,Z=N?!1:fe||me,$=c.get(C);T.set(C,{element:C,collapsed:Z,currentMinWidth:(f=$==null?void 0:$.width)!=null?f:k.currentMinWidth,currentMaxWidth:(v=$==null?void 0:$.width)!=null?v:k.currentMaxWidth,flex:(P=(_=$==null?void 0:$.flex)!=null?_:k.flex)!=null?P:1}),Z?M-=be:M-=W-be}const O=[];for(const C of n){const k=T.get(C);k&&O.push(k)}for(const C of t)C({expandedElement:l||n[n.length-1]||null,panes:O,resizing:d})}}function qs(t){const{children:n,minWidth:s,onCollapse:a,onExpand:o,...i}=t,r=u.useMemo(()=>Js(),[]),[l,c]=u.useState(null),d=ue(l),h=(d==null?void 0:d.width)||0,p=h===void 0||!s?void 0:h<s,[m,g]=u.useState({expandedElement:null,panes:[],resizing:!1});u.useEffect(()=>r.setRootElement(l),[r,l]),u.useEffect(()=>r.setRootWidth(h),[r,h]),u.useEffect(()=>r.subscribe(g),[r]),u.useEffect(()=>{p!==void 0&&(p&&a&&a(),!p&&o&&o())},[p,a,o]);const b=u.useMemo(()=>({collapse:r.collapse,collapsed:p,expand:r.expand,expandedElement:m.expandedElement,mount:r.mount,panes:m.panes,resize:r.resize,resizing:m.resizing}),[p,r,m.expandedElement,m.panes,m.resizing]);return e.jsx(Jt.Provider,{value:b,children:e.jsx(qt,{"data-ui":"PaneLayout",...i,"data-collapsed":p?"":void 0,"data-resizing":m.resizing?"":void 0,"data-mounted":h?"":void 0,ref:c,children:n})})}function Zs(t){const{documentId:n,documentType:s,flex:a}=t,{collapsed:o}=Me(),{closeInspector:i,inspector:r}=L(),{features:l}=J(),c=u.useCallback(()=>{r&&i(r.name)},[i,r]);if(o||!r)return null;const d=u.createElement(r.component,{onClose:c,documentId:n,documentType:s});return l.resizablePanes?e.jsx(us,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,maxWidth:ps,minWidth:Se,children:d}):e.jsx(E,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,children:d})}var Qs=Object.defineProperty,eo=(t,n,s)=>n in t?Qs(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,ve=(t,n,s)=>(eo(t,typeof n!="symbol"?n+"":n,s),s);class Y extends Error{constructor(n){let{message:s,context:a,helpId:o,cause:i}=n;super(s),ve(this,"cause"),ve(this,"context"),ve(this,"helpId"),this.context=a,this.helpId=o,this.cause=i}}const Ke=new WeakMap;function he(t){const n=Ke.get(t);if(n)return n;const s=Bs();return Ke.set(t,s),s}const Xe=new WeakMap;function Xn(t,n){const s=Xe.get(t)||new Map;if(s){const i=s.get(n);if(i)return i}const a=t[n];if(typeof a!="function")throw new Error("Expected property `".concat(n,"` to be a function but got ").concat(typeof a," instead."));const o=a.bind(t);return s.set(n,o),Xe.set(t,s),o}const no=t=>!!t&&typeof(t==null?void 0:t.then)=="function",to=t=>ne(t)?typeof t.serialize=="function":!1,so=t=>(n,s,a)=>{try{return t(n,s,a)}catch(o){throw o instanceof Y?o:new Y({message:typeof(o==null?void 0:o.message)=="string"?o.message:"",context:s,cause:o})}},oo=t=>function(){return t(...arguments).pipe(Ws(1),Ns())};function Yn(t){const n=so(oo(t((s,a,o)=>{if(!s)throw new Y({message:"Pane returned no child",context:a,helpId:"structure-item-returned-no-child"});return no(s)||Ms(s)?ks(s).pipe(Le(i=>n(i,a,o))):to(s)?n(s.serialize(a),a,o):typeof s=="function"?n(s(a.id,a),a,o):U(s)})));return n}async function ao(t){const n=new Map,a=Yn(c=>(d,h,p)=>{const m=d&&"".concat(he(d),"-").concat(h.path.join("__")),g=m&&n.get(m);if(g)return g;const b=c(d,h,p);return m&&n.set(m,b),b}),o=[[{id:"__edit__".concat(t.params.id),params:{...An(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function i(c){let{currentId:d,flatIndex:h,intent:p,params:m,parent:g,path:b,payload:j,unresolvedPane:y,levelIndex:x,structureContext:f}=c;var v;if(!y)return[];const{id:_,type:P,...I}=m,S=await Kn(a(y,{id:d,splitIndex:0,parent:g,path:b,index:h,params:{},payload:void 0,structureContext:f},h));return S.type==="document"&&S.id===_?[{panes:[...b.slice(0,b.length-1).map(w=>[{id:w}]),[{id:_,params:I,payload:j}]],depthIndex:b.length,levelIndex:x}]:(v=S.canHandleIntent)!=null&&v.call(S,p,m,{pane:S,index:h})||S.type==="documentList"&&S.schemaTypeName===P&&S.options.filter==="_type == $type"?[{panes:[...b.map(w=>[{id:w}]),[{id:m.id,params:I,payload:j}]],depthIndex:b.length,levelIndex:x}]:S.type==="list"&&S.child&&S.items?(await Promise.all(S.items.map((w,R)=>w.type==="divider"?Promise.resolve([]):i({currentId:w._id||w.id,flatIndex:h+1,intent:p,params:m,parent:S,path:[...b,w.id],payload:j,unresolvedPane:typeof S.child=="function"?Xn(S,"child"):S.child,levelIndex:R,structureContext:f})))).flat():[]}const l=(await i({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((c,d)=>c.depthIndex===d.depthIndex?c.levelIndex-d.levelIndex:c.depthIndex-d.depthIndex)[0];return l?l.panes:o}const ro=(t,n)=>{const s=t.replace(/^__edit__/,""),{params:a,payload:o,structureContext:{resolveDocumentNode:i}}=n,{type:r,template:l}=a;if(!r)throw new Error("Document type for document with ID ".concat(s," was not provided in the router params."));let c=i({schemaType:r,documentId:s}).id("editor");return l&&(c=c.initialValueTemplate(l,o)),c.serialize()};function io(t){var n,s;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&he(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(n=t.serializeOptions)==null?void 0:n.index,serializeOptionsPath:(s=t.serializeOptions)==null?void 0:s.path}),")")}const Ye=t=>{const n={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?he(t.paneNode):null};return"metaHash(".concat(JSON.stringify(n),")")};function ae(t){let{unresolvedPane:n,flattenedRouterPanes:s,parent:a,path:o,resolvePane:i,structureContext:r}=t;const[l,...c]=s,d=c[0],h={id:l.routerPaneSibling.id,splitIndex:l.siblingIndex,parent:a,path:[...o,l.routerPaneSibling.id],index:l.flatIndex,params:l.routerPaneSibling.params||{},payload:l.routerPaneSibling.payload,structureContext:r};try{return i(n,h,l.flatIndex).pipe(Le(p=>{const m={type:"resolvedMeta",...l,paneNode:p,path:h.path},g=c.map((j,y)=>({type:"loading",path:[...h.path,...c.slice(y).map((v,_)=>"[".concat(j.flatIndex+_,"]"))],paneNode:null,...j}));if(!c.length)return U([m]);let b;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?b=ae({unresolvedPane:ro,flattenedRouterPanes:c,parent:a,path:h.path,resolvePane:i,structureContext:r}):l.groupIndex===(d==null?void 0:d.groupIndex)?b=ae({unresolvedPane:n,flattenedRouterPanes:c,parent:a,path:o,resolvePane:i,structureContext:r}):b=ae({unresolvedPane:typeof p.child=="function"?Xn(p,"child"):p.child,flattenedRouterPanes:c,parent:p,path:h.path,resolvePane:i,structureContext:r}),Bn(U([m,...g]),b.pipe(V(j=>[m,...j])))}))}catch(p){if(p instanceof Y&&(p.context&&console.warn("Pane resolution error at index ".concat(p.context.index).concat(p.context.splitIndex>0?" for split pane index ".concat(p.context.splitIndex):"",": ").concat(p.message).concat(p.helpId?" - see ".concat($n(p.helpId)):""),p),p.helpId==="structure-item-returned-no-child"))return U([]);throw p}}function lo(t){let{routerPanesStream:n,rootPaneNode:s,initialCacheState:a={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>Os},structureContext:o}=t;return n.pipe(V(r=>[[{id:"root"}],...r]),V(r=>r.flatMap((c,d)=>c.map((h,p)=>({routerPaneSibling:h,groupIndex:d,siblingIndex:p}))).map((c,d)=>({...c,flatIndex:d}))),hs([]),Hs(),V(r=>{let[l,c]=r;for(let d=0;d<c.length;d++){const h=l[d],p=c[d];if(!je(h,p))return{flattenedRouterPanes:c,diffIndex:d}}return{flattenedRouterPanes:c,diffIndex:c.length}}),He((r,l)=>{const{cacheKeysByFlatIndex:c,resolvedPaneCache:d}=r,{flattenedRouterPanes:h,diffIndex:p}=l,m=c.slice(0,p+1),g=c.slice(p+1),b=new Set(m.flatMap(x=>Array.from(x))),j=g.flatMap(x=>Array.from(x)).filter(x=>!b.has(x));for(const x of j)d.delete(x);return{flattenedRouterPanes:h,cacheKeysByFlatIndex:c,resolvedPaneCache:d,resolvePane:Yn(x=>(f,v,_)=>{const P=f&&"".concat(he(f),"-").concat(io(v)),I=P&&d.get(P);if(I)return I;const T=x(f,v,_);if(!P)return T;const S=c[_]||new Set;return S.add(P),c[_]=S,d.set(P,T),T})}},a),Le(r=>{let{flattenedRouterPanes:l,resolvePane:c}=r;return ae({unresolvedPane:s,flattenedRouterPanes:l,parent:null,path:[],resolvePane:c,structureContext:o})})).pipe(He((r,l)=>l.map((c,d)=>{const h=r[d];return!h||c.type!=="loading"?c:h.routerPaneSibling.id===c.routerPaneSibling.id?h:c}),[]),fs((r,l)=>{if(r.length!==l.length)return!1;for(let c=0;c<l.length;c++){const d=r[c],h=l[c];if(Ye(d)!==Ye(h))return!1}return!0}))}function co(){const t=u.useMemo(()=>new ms(1),[]),n=u.useMemo(()=>t.asObservable().pipe(V(a=>(a==null?void 0:a.panes)||[])),[t]),{state:s}=De();return u.useEffect(()=>{t.next(s)},[s,t]),n}function uo(){const[t,n]=u.useState();if(t)throw t;const{structureContext:s,rootPaneNode:a}=J(),[o,i]=u.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),r=co();return u.useEffect(()=>{const c=lo({rootPaneNode:a,routerPanesStream:r,structureContext:s}).pipe(V(d=>{const h=d.reduce((g,b)=>{const j=g[b.groupIndex]||[];return j[b.siblingIndex]=b.routerPaneSibling,g[b.groupIndex]=j,g},[]),p=h.length,m=d.map(g=>{var b;const{groupIndex:j,flatIndex:y,siblingIndex:x,routerPaneSibling:f,path:v}=g,_=f.id,P=h[j+1];return{active:j===p-2,childItemId:(b=P==null?void 0:P[0].id)!=null?b:null,index:y,itemId:f.id,groupIndex:j,key:"".concat(g.type==="loading"?"unknown":g.paneNode.id,"-").concat(_,"-").concat(x),pane:g.type==="loading"?Pe:g.paneNode,params:f.params||{},path:v.join(";"),payload:f.payload,selected:y===d.length-1,siblingIndex:x}});return{paneDataItems:m,routerPanes:h,resolvedPanes:m.map(g=>g.pane)}})).subscribe({next:d=>i(d),error:d=>n(d)});return()=>c.unsubscribe()},[a,r,s]),o}async function po(t,n,s){if(n&&s)return{id:n,type:s};if(!n&&s)return{id:xs(),type:s};if(n&&!s){const a=await Kn(t.resolveTypeForDocument(n));return{id:n,type:a}}throw new Y({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const ho={},fo=u.memo(function(){const{navigate:n}=De(),s=Te(u.useCallback(c=>{const d=typeof c.intent=="string"?c.intent:void 0;return d?{intent:d,params:ne(c.params)?c.params:ho,payload:c.payload}:void 0},[])),{rootPaneNode:a,structureContext:o}=J(),i=In(),[r,l]=u.useState(null);if(r)throw r;return u.useEffect(()=>{if(s){const{intent:c,params:d,payload:h}=s;let p=!1;async function m(){const{id:g,type:b}=await po(i,typeof d.id=="string"?d.id:void 0,typeof d.type=="string"?d.type:void 0);if(p)return;const j=await ao({intent:c,params:{...d,id:g,type:b},payload:h,rootPaneNode:a,structureContext:o});p||n({panes:j},{replace:!0})}return m().catch(l),()=>{p=!0}}},[i,s,n,a,o]),null});var Je=Object.freeze,mo=Object.defineProperty,xo=(t,n)=>Je(mo(t,"raw",{value:Je(n||t.slice())})),qe;const go=A.span(qe||(qe=xo([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function bo(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function vo(t){let{error:n}=t;if(!(n instanceof Y))throw n;const{cause:s}=n,a=(s==null?void 0:s.stack)||n.stack,o=a&&!(s instanceof ge)&&!n.message.includes("Module build failed:"),i=s instanceof ge?s.path:[],r=s instanceof ge&&s.helpId||n.helpId,l=u.useCallback(()=>{window.location.reload()},[]);return e.jsx(G,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:e.jsxs(te,{children:[e.jsx(gs,{as:"h2",children:"Encountered an error while reading structure"}),e.jsxs(G,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[i.length>0&&e.jsxs(H,{space:2,children:[e.jsx(Ve,{children:"Structure path"}),e.jsx(Ie,{children:i.slice(1).map((c,d)=>e.jsx(go,{children:c},"".concat(c,"-").concat(d)))})]}),e.jsxs(H,{marginTop:4,space:2,children:[e.jsx(Ve,{children:"Error"}),e.jsx(Ie,{children:o?bo(a):n.message})]}),r&&e.jsx(E,{marginTop:4,children:e.jsx(D,{children:e.jsx("a",{href:$n(r),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),e.jsx(E,{marginTop:4,children:e.jsx(B,{text:"Reload",icon:Dn,tone:"primary",onClick:l})})]})]})})}function jo(t){const{isSelected:n,pane:s,paneKey:a}=t,o=ne(s)&&s.type||null;return e.jsxs(ie,{id:a,selected:n,children:[e.jsx(ke,{title:"Unknown pane type"}),e.jsx(le,{children:e.jsx(E,{padding:4,children:typeof o=="string"?e.jsxs(D,{as:"p",muted:!0,children:["Structure item of type ",e.jsx("code",{children:o})," is not a known entity."]}):e.jsxs(D,{as:"p",muted:!0,children:["Structure item is missing required ",e.jsx("code",{children:"type"})," property."]})})})]})}function yo(t){const n=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],s=U(null);return bs(...n.map(a=>{let{ms:o,message:i}=a;return s.pipe(vs(i),js(o))}))}var Ze=Object.freeze,_o=Object.defineProperty,Po=(t,n)=>Ze(_o(t,"raw",{value:Ze(n||t.slice())})),Qe;const wo="Loading…",So=A(z)(Qe||(Qe=Po([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),ee=u.memo(t=>{const{delay:n=300,flex:s,message:a=yo,minWidth:o,paneKey:i,path:r,selected:l,title:c,tone:d}=t,h=u.useMemo(()=>typeof a=="function"?a(r?r.split(";"):[]):a,[a,r]),[p,m]=u.useState(()=>typeof h=="string"?h:wo);u.useEffect(()=>{if(typeof h!="object"||typeof h.subscribe=="function")return;const f=h.subscribe(m);return()=>f.unsubscribe()},[h]);const[g,b]=u.useState(null),[j,y]=u.useState(!1);u.useEffect(()=>{if(g)return lt(()=>y(!0))},[g]);const x=e.jsxs(So,{align:"center","data-mounted":j?"":void 0,direction:"column",height:"fill",justify:"center",ref:b,children:[e.jsx(Tn,{muted:!0}),(c||p)&&e.jsx(E,{marginTop:3,children:e.jsx(D,{align:"center",muted:!0,size:1,children:c||p})})]});return e.jsx(ie,{flex:s,id:i,minWidth:o,selected:l,tone:d,children:e.jsx(le,{children:x})})});ee.displayName="LoadingPane";const Io={component:u.lazy(()=>oe(()=>import("./index-df65886d-a5c37970.js"),["static/index-df65886d-a5c37970.js","static/sanity-e77b72cc.js"])),document:u.lazy(()=>oe(()=>import("./index-a59da7d1-e4229803.js"),["static/index-a59da7d1-e4229803.js","static/sanity-e77b72cc.js","static/json-inspector-2382f4eb.js"])),documentList:u.lazy(()=>oe(()=>import("./index-bac3c61c-1c716d83.js"),["static/index-bac3c61c-1c716d83.js","static/sanity-e77b72cc.js","static/PaneItem-1e97aa6c-9ccce2ac.js","static/json-inspector-2382f4eb.js"])),list:u.lazy(()=>oe(()=>import("./index-cd896d4c-9ac1639e.js"),["static/index-cd896d4c-9ac1639e.js","static/sanity-e77b72cc.js","static/PaneItem-1e97aa6c-9ccce2ac.js"]))},Co=u.memo(function(n){const{active:s,childItemId:a,groupIndex:o,index:i,itemId:r,pane:l,paneKey:c,params:d,payload:h,path:p,selected:m,siblingIndex:g}=n,b=Io[l.type]||jo;return e.jsx(Gs,{flatIndex:i,index:o,params:d,payload:h,siblingIndex:g,children:e.jsx(u.Suspense,{fallback:e.jsx(ee,{paneKey:c,path:p,selected:m}),children:e.jsx(b,{childItemId:a||"",index:i,itemId:r,isActive:s,isSelected:m,paneKey:c,pane:l})})})},(t,n)=>{let{params:s={},payload:a=null,...o}=t,{params:i={},payload:r=null,...l}=n;if(!je(s,i)||!je(a,r))return!1;const c=new Set([...Object.keys(o),...Object.keys(l)]);for(const d of c)if(o[d]!==l[d])return!1;return!0});function Jn(t){const{children:n,currentMinWidth:s,flex:a,minWidth:o,paneKey:i,title:r="Error",tone:l="critical"}=t;return e.jsxs(ie,{currentMinWidth:s,flex:a,id:i,minWidth:o,tone:l,children:[e.jsx(ke,{title:r}),e.jsx(le,{overflow:"auto",children:e.jsx(E,{paddingX:4,paddingY:5,children:n})})]})}function Eo(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function Do(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}const To=["patch","commit"],Ro=u.memo(function(){const{push:n}=Re(),{documentId:s,documentType:a}=L(),o=ct(s,a),i=u.useRef(o);return u.useEffect(()=>{!o||o===i.current||(o.type==="error"&&n({closable:!0,duration:3e4,status:"error",title:Eo(o.op),description:e.jsxs("details",{children:[e.jsx("summary",{children:"Details"}),o.error.message]})}),o.type==="success"&&!To.includes(o.op)&&n({closable:!0,status:"success",title:Do(o.op)}),i.current=o)},[o,n]),null});function Mo(t,n,s){const a=dt(),[o,i]=u.useState(s),r=u.useMemo(()=>a.forNamespace("desk-tool"),[a]),l=u.useMemo(()=>t?r.forNamespace(t).forKey(n):r.forKey(n),[r,t,n]);u.useEffect(()=>{const d=l.listen(s).subscribe({next:i});return()=>d==null?void 0:d.unsubscribe()},[s,n,t,l]);const c=u.useCallback(d=>{i(d),l.set(d)},[l]);return u.useMemo(()=>[o,c],[c,o])}const K={id:"parsed",title:"Parsed"},X={id:"raw",title:"Raw JSON"},ko=[K,X],re=Fs(1e3);function qn(t,n){const s=re.get(t);return s===void 0?(re.set(t,Array.isArray(n)||ne(n)),qn(t,n)):s}function Oo(t){const{path:n}=t,s=re.get(n);s!==void 0&&re.set(n,!s)}function Zn(t){const n=window.getSelection();if(n){const s=document.createRange();n.removeAllRanges(),s.selectNodeContents(t),n.addRange(s)}}function en(t){Zn(t.currentTarget)}function zo(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),Zn(t.currentTarget))}function Lo(t){return ne(t)&&Ue(t._id)&&Ue(t._type)}var nn=Object.freeze,Ao=Object.defineProperty,Bo=(t,n)=>nn(Ao(t,"raw",{value:nn(n||t.slice())})),tn;const Wo=A.div(t=>{let{theme:n}=t;const{color:s,fonts:a,space:o}=n.sanity;return Cn(tn||(tn=Bo([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),a.code.family,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,Q(o[4]),Q(o[3]),Q(o[4]),a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,Q(o[4]/2),s.syntax.property,s.syntax.constant,Q(o[3]),s.syntax.string,s.syntax.boolean,s.syntax.number)});function No(t){const{onChange:n,query:s}=t,a=u.useCallback(o=>n(o.target.value),[n]);return e.jsx(zs,{icon:Ls,onChange:a,placeholder:"Search",radius:2,value:s||""})}function Fo(t){const{value:n}=t,{onInspectClose:s,paneKey:a}=L(),o="".concat(a,"_inspect_"),[i,r]=Mo("desk-tool","inspect-view-preferred-view-mode-".concat(a),"parsed"),l=ko.find(h=>h.id===i),c=u.useCallback(()=>{r(K.id)},[r]),d=u.useCallback(()=>{r(X.id)},[r]);return e.jsx(Ae,{id:"".concat(o,"dialog"),header:Lo(n)?e.jsxs(e.Fragment,{children:["Inspecting"," ",e.jsx("em",{children:e.jsx(ys,{document:n})})]}):e.jsx("em",{children:"No value"}),onClose:s,onClickOutside:s,width:3,children:e.jsxs(z,{direction:"column",height:"fill",children:[e.jsx(G,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:e.jsxs(Wn,{space:1,children:[e.jsx(we,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(K.id),label:K.title,onClick:c,selected:l===K}),e.jsx(we,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(X.id),label:X.title,onClick:d,selected:l===X})]})}),e.jsxs(_s,{"aria-labelledby":"".concat(o,"tab-").concat(i),flex:1,id:"".concat(o,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[l===K&&e.jsx(Wo,{children:e.jsx($s,{data:n,isExpanded:qn,onClick:Oo,search:No})}),l===X&&e.jsx(Ie,{language:"json",tabIndex:0,onKeyDown:zo,onDoubleClick:en,onFocus:en,children:JSON.stringify(n,null,2)})]})]})})}var sn=Object.freeze,$o=Object.defineProperty,Qn=(t,n)=>sn($o(t,"raw",{value:sn(n||t.slice())})),on,an;const Ho=A(G)(on||(on=Qn([`
  position: relative;
  z-index: 50;
`]))),rn=A(D)(an||(an=Qn([`
  & > * {
    overflow: hidden;
    overflow: clip;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),et=u.memo(()=>{var t,n,s,a,o,i;const r=ut(),{params:l,groupIndex:c,routerPanesState:d,replaceCurrent:h,BackLink:p}=ce(),m=(t=d[c])==null?void 0:t[0].id,g=d[c-1],b=g==null?void 0:g[0],j=b==null?void 0:b.id,y=!!((n=b==null?void 0:b.params)!=null&&n.rev),x=u.useMemo(()=>(l==null?void 0:l.parentRefPath)&&ye(l.parentRefPath)||null,[l==null?void 0:l.parentRefPath]),f=pt(()=>{const P=x==null?void 0:x[0];if(!j||!P||!x)return U({loading:!1});const I=Zt(j),T=ye(P),S=T.findIndex(w=>typeof w=="object"&&"_key"in w);return Bn(U({loading:!0}),r.unstable_observePathsDocumentPair(I,S===-1?T:T.slice(0,S)).pipe(Qt(750),V(w=>{let{draft:R,published:M}=w;var O;return{loading:!1,result:{availability:{draft:R.availability,published:M.availability},refValue:(O=es(R.snapshot||M.snapshot,x))==null?void 0:O._ref}}})))},[r,j,x],{loading:!0}),v=u.useCallback(()=>{var P;f.loading||(P=f.result)!=null&&P.refValue&&h({id:f.result.refValue,params:l})},[f.loading,f.result,h,l]);return!j||!x||y||f.loading||!((s=f.result)!=null&&s.availability.draft.available)&&!((a=f.result)!=null&&a.availability.published.available)||((o=f.result)==null?void 0:o.refValue)===m?null:e.jsx(Ho,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:e.jsx(te,{paddingX:4,paddingY:2,sizing:"border",width:1,children:e.jsxs(z,{align:"center",children:[e.jsx(D,{size:1,children:e.jsx(En,{})}),(i=f.result)!=null&&i.refValue?e.jsxs(e.Fragment,{children:[e.jsx(E,{flex:1,marginLeft:3,children:e.jsx(rn,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),e.jsx(E,{marginLeft:3,children:e.jsx(B,{onClick:v,icon:Dn,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{flex:1,marginLeft:3,children:e.jsx(rn,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),e.jsx(E,{marginLeft:3,children:e.jsx(B,{as:p,icon:_e,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});et.displayName="ReferenceChangedBanner";var ln=Object.freeze,Vo=Object.defineProperty,Uo=(t,n)=>ln(Vo(t,"raw",{value:ln(n||t.slice())})),cn;const Go=A(G)(cn||(cn=Uo([`
  position: relative;
  z-index: 50;
`])));function Ko(t){let{granted:n,requiredPermission:s}=t;var a,o;const i=Ps(),r=((a=i==null?void 0:i.roles)==null?void 0:a.length)!==1,l=Xo(((o=i==null?void 0:i.roles)==null?void 0:o.map(c=>e.jsx("code",{children:c.title},c.name)))||[],", ");return n?null:e.jsx(Go,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:e.jsx(te,{paddingX:4,paddingY:3,sizing:"border",width:1,children:e.jsxs(z,{align:"flex-start",children:[e.jsx(D,{size:1,children:e.jsx(ws,{})}),e.jsx(E,{flex:1,marginLeft:3,children:e.jsxs(D,{size:1,children:["Your role",r&&"s"," ",l," ",r?"do":"does"," not have permissions to"," ",s," this document."]})})]})})})}function Xo(t,n){return t.reduce((s,a)=>s===null?[a]:s.concat([n,a]),null)}function Yo(t){const n=u.useRef();return u.useEffect(()=>{n.current=t},[t]),n.current}const Jo=1e3*60*60*24*24;function qo(t){const n=Re(),s=Yo(t.enabled);u.useEffect(()=>{!s&&t.enabled&&n.push({...t,duration:Jo}),s&&!t.enabled&&n.push({...t,duration:.01})},[t,n,s])}const Zo=t=>t.preventDefault(),Qo=u.forwardRef(function(n,s){var a;const{hidden:o,margins:i}=n,{collapsedFieldSets:r,collapsedPaths:l,displayed:c,editState:d,documentId:h,documentType:p,fieldActions:m,onChange:g,validation:b,ready:j,formState:y,onFocus:x,onBlur:f,onSetCollapsedPath:v,onPathOpen:_,onSetCollapsedFieldSet:P,onSetActiveFieldGroup:I}=L(),T=In(),S=ht(h),w=u.useMemo(()=>ft(),[]),R=(a=d==null?void 0:d.transactionSyncLock)==null?void 0:a.enabled;qo({id:"sync-lock-".concat(h),status:"warning",enabled:R,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),u.useEffect(()=>{const W=T.pair.documentEvents(h,p).pipe(mt(N=>{N.type==="mutation"&&w.publish(ea(N)),N.type==="rebase"&&w.publish(na(N))})).subscribe();return()=>{W.unsubscribe()}},[h,T,p,w]);const M=!!(c!=null&&c._rev);u.useEffect(()=>{M&&w.publish({type:"mutation",patches:[],snapshot:c})},[M]);const[O,C]=u.useState(null);u.useEffect(()=>{j&&!(y!=null&&y.focusPath.length)&&O&&xt(O)},[j]);const k=u.useCallback(W=>{C(W),typeof s=="function"?s(W):s&&(s.current=W)},[s]);return e.jsx(te,{hidden:o,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:e.jsx(gt,{margins:i,children:e.jsx(E,{as:"form",onSubmit:Zo,ref:k,children:j?y===null?e.jsx(E,{padding:2,children:e.jsx(D,{children:"This form is hidden"})}):e.jsx(bt,{__internal_fieldActions:m,__internal_patchChannel:w,collapsedFieldSets:r,collapsedPaths:l,focusPath:y.focusPath,changed:y.changed,focused:y.focused,groups:y.groups,id:"root",members:y.members,onChange:g,onFieldGroupSelect:I,onPathBlur:f,onPathFocus:x,onPathOpen:_,onSetFieldSetCollapsed:P,onSetPathCollapsed:v,presence:S,readOnly:y.readOnly,schemaType:y.schemaType,validation:b,value:y.value}):e.jsx(vt,{ms:300,children:e.jsxs(z,{align:"center",direction:"column",height:"fill",justify:"center",children:[e.jsx(Tn,{muted:!0}),e.jsx(E,{marginTop:3,children:e.jsx(D,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})});function ea(t){const n=t.mutations.map(s=>s.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:Ce(t.origin,n)}}function na(t){const n=t.remoteMutations.map(a=>a.patch).filter(Boolean),s=t.localMutations.map(a=>a.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:Ce("remote",n).concat(Ce("local",s))}}function ta(){const{activeViewId:t,paneKey:n,views:s}=L(),a="".concat(n,"tabpanel");return e.jsx(Wn,{space:1,children:s.map((o,i)=>{var r;return e.jsx(sa,{icon:o.icon,id:"".concat(n,"tab-").concat(o.id),isActive:t===o.id,label:e.jsx(e.Fragment,{children:o.title}),tabPanelId:a,viewId:i===0?null:(r=o.id)!=null?r:null},o.id)})})}function sa(t){const{isActive:n,tabPanelId:s,viewId:a}=t,{ready:o}=L(),{setView:i}=ce(),r=u.useCallback(()=>i(a),[i,a]);return e.jsx(we,{...t,"aria-controls":s,disabled:!o,fontSize:1,selected:n,onClick:r})}function oa(){const{connectionState:t,schemaType:n,title:s,value:a}=L(),o=!!a&&t==="connected",{error:i,value:r}=ns({enabled:o,schemaType:n,value:a});return t!=="connected"?e.jsx(e.Fragment,{}):s?e.jsx(e.Fragment,{children:s}):a?i?e.jsxs(e.Fragment,{children:["Error: ",i.message]}):e.jsx(e.Fragment,{children:(r==null?void 0:r.title)||e.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):e.jsxs(e.Fragment,{children:["New ",(n==null?void 0:n.title)||(n==null?void 0:n.name)]})}const aa=u.memo(u.forwardRef(function(n,s){const{onMenuAction:a,onPaneClose:o,onPaneSplit:i,menuItems:r,menuItemGroups:l,schemaType:c,timelineStore:d,ready:h,views:p,unstable_languageFilter:m}=L(),{features:g}=J(),{index:b,BackLink:j,hasGroupSiblings:y}=ce(),{actions:x}=jt(),f=u.useMemo(()=>yt({actionHandler:a,fieldActions:x,menuItems:r,menuItemGroups:l}),[a,x,l,r]),v=u.useMemo(()=>f.filter(_t),[f]),_=u.useMemo(()=>f.filter(Pt),[f]),P=p.length>1,I=de(d,C=>C.revTime),{collapsed:T,isLast:S}=Me(),w=S&&!T?-1:0,R=g.splitViews&&i&&p.length>1,M=R&&y,O=!M&&!g.backButton;return e.jsx(ke,{ref:s,loading:!h,title:e.jsx(oa,{}),tabs:P&&e.jsx(ta,{}),tabIndex:w,backButton:g.backButton&&b>0&&e.jsx(B,{as:j,"data-as":"a",icon:wt,mode:"bleed",padding:2}),subActions:e.jsx(St,{chunk:I,mode:"rev",placement:"bottom-end"}),actions:e.jsxs(z,{align:"center",gap:1,children:[m.length>0&&e.jsx(e.Fragment,{children:m.map((C,k)=>u.createElement(C,{key:"language-filter-".concat(k),schemaType:c}))}),v.map(C=>e.jsx(It,{node:C},C.key)),e.jsx(Ct,{nodes:_},"context-menu"),R&&e.jsx(q,{content:e.jsx(D,{size:1,style:{whiteSpace:"nowrap"},children:"Split pane right"}),padding:2,placement:"bottom",portal:!0,children:e.jsx(B,{"aria-label":"Split pane right",icon:Et,mode:"bleed",onClick:i},"split-pane-button")}),M&&e.jsx(B,{icon:_e,mode:"bleed",onClick:o,title:"Close split pane"},"close-view-button"),O&&e.jsx(B,{icon:_e,mode:"bleed",title:"Close pane group",as:j},"close-view-button")]})})}));var dn=Object.freeze,ra=Object.defineProperty,ia=(t,n)=>dn(ra(t,"raw",{value:dn(n||t.slice())})),un;const la=A(E)({position:"relative"}),ca=A(Dt)(t=>{let{$disabled:n}=t;return n?{height:"100%"}:Cn(un||(un=ia([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),da=function(n){const{footerHeight:s,isInspectOpen:a,rootElement:o,setDocumentPanelPortalElement:i}=n,{activeViewId:r,displayed:l,documentId:c,editState:d,inspector:h,value:p,views:m,ready:g,schemaType:b,permissions:j,isPermissionsLoading:y}=L(),{collapsed:x}=kn(),{collapsed:f}=Me(),v=Nn(),{features:_}=J(),[P,I]=u.useState(null),T=ue(P),S=u.useRef(null),[w,R]=u.useState(null),M=u.useRef(null),O=p._createdAt?"update":"create",C=u.useMemo(()=>m.find($=>$.id===r)||m[0]||{type:"form"},[r,m]),k=_.splitPanes&&S.current||v.element,W=u.useMemo(()=>x?[(T==null?void 0:T.height)||0,0,s?s+2:2,0]:[0,0,2,0],[x,s,T]),N=C.type!=="form",fe=u.useMemo(()=>C.type==="component"&&C.component&&u.createElement(C.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:l||p,historical:l,published:(d==null?void 0:d.published)||null},documentId:c,options:C.options,schemaType:b}),[C,l,c,d==null?void 0:d.draft,d==null?void 0:d.published,b,p]);u.useEffect(()=>{w!=null&&w.scrollTo&&w.scrollTo(0,0)},[c,w]),u.useEffect(()=>{k&&i(k)},[k,i]);const me=u.useMemo(()=>a?e.jsx(Fo,{value:l||p}):null,[a,l,p]),Z=!!(!f&&h);return e.jsxs(e.Fragment,{children:[e.jsx(aa,{ref:I}),e.jsx(le,{children:e.jsxs(z,{height:"fill",children:[(_.resizablePanes||!Z)&&e.jsx(la,{flex:2,overflow:"hidden",children:e.jsx(pe,{element:k,__unstable_elements:{documentScrollElement:w},children:e.jsx($e,{element:w,children:e.jsxs(ts,{scrollElement:w,containerElement:M,children:[C.type==="form"&&!y&&g&&e.jsxs(e.Fragment,{children:[e.jsx(Ko,{granted:!!(j!=null&&j.granted),requiredPermission:O}),e.jsx(et,{})]}),e.jsxs(ca,{$disabled:x||!1,"data-testid":"document-panel-scroller",ref:R,children:[e.jsx(Qo,{hidden:N,margins:W,ref:M},c+(g?"_ready":"_pending")),fe]}),me,e.jsx("div",{"data-testid":"document-panel-portal",ref:S})]})})})}),Z&&e.jsx($e,{element:o,children:e.jsx(Zs,{documentId:c,documentType:b.name,flex:1})})]})})]})},nt=["left","bottom"],ua={small:0,medium:1,large:2,full:"auto"};function pa(t){const{dialog:n,referenceElement:s}=t;return e.jsx(Hn,{content:e.jsx(ha,{dialog:n}),fallbackPlacements:nt,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function ha(t){const{dialog:n}=t,{cancelButtonIcon:s,cancelButtonText:a,confirmButtonIcon:o,confirmButtonText:i,message:r,onCancel:l,onConfirm:c,tone:d}=n,{isTopLayer:h}=Vn(),[p,m]=u.useState(null),g=u.useCallback(()=>{h&&l()},[h,l]),b=u.useCallback(j=>{j.key==="Escape"&&h&&l()},[h,l]);return Un(g,[p]),Gn(b),e.jsxs(z,{direction:"column",ref:m,style:{minWidth:320-16,maxWidth:400},children:[e.jsx(E,{flex:1,overflow:"auto",padding:4,children:e.jsx(D,{children:r})}),e.jsx(E,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:e.jsxs(As,{columns:2,gap:2,children:[e.jsx(B,{icon:s,onClick:l,mode:"ghost",text:a||"Cancel"}),e.jsx(B,{icon:o,onClick:c,text:i||"Confirm",tone:d})]})})]})}function fa(t){const{dialog:n}=t,s=u.useId(),a=n.footer&&e.jsx(E,{paddingX:4,paddingY:3,children:n.footer});return e.jsx(ze,{zOffset:"fullscreen",children:e.jsx(Ae,{__unstable_hideCloseButton:n.showCloseButton===!1,footer:a,header:n.header,id:s,onClose:n.onClose,onClickOutside:n.onClose,width:n.width===void 0?1:ua[n.width],children:e.jsx(E,{padding:4,children:n.content})})})}function ma(t){const{dialog:n,referenceElement:s}=t;return e.jsx(Hn,{content:e.jsx(xa,{dialog:n}),fallbackPlacements:nt,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function xa(t){const{dialog:n}=t,{content:s,onClose:a}=n,{isTopLayer:o}=Vn(),[i,r]=u.useState(null),l=u.useCallback(()=>{o&&a()},[o,a]),c=u.useCallback(d=>{d.key==="Escape"&&o&&a()},[o,a]);return Un(l,[i]),Gn(c),e.jsx("div",{ref:r,children:s})}function pn(t){const{children:n}=t,{element:s,elements:a}=Nn(),o=(a==null?void 0:a[On])||s;return e.jsx(pe,{element:o,children:n})}function We(t){const{dialog:n,referenceElement:s=null}=t,a=u.useId();if(n.type==="confirm")return e.jsx(pa,{dialog:n,referenceElement:s});if(n.type==="popover")return e.jsx(ma,{dialog:n,referenceElement:s});if(n.type==="dialog"||!n.type)return e.jsx(pn,{children:e.jsx(fa,{dialog:n})});if(n.type==="custom")return e.jsx(pn,{children:n==null?void 0:n.component});const o=n;return console.warn("Unsupported modal type ".concat(o.type)),e.jsx(Ae,{id:a,onClose:o.onClose,onClickOutside:o.onClose,width:2,children:e.jsx(E,{padding:4,children:o.content||e.jsxs(e.Fragment,{children:["Unexpected modal type (",e.jsx("code",{children:o.type}),")"]})})})}function ga(t){const{actionStates:n,disabled:s}=t,a=u.useId(),o=u.useRef(null),[i,r]=u.useState(-1),[l,c]=u.useState(null),d=u.useCallback(m=>{r(m)},[]),h=u.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),p=n[i];return e.jsxs(e.Fragment,{children:[e.jsx(Ss,{id:"".concat(a,"-action-menu"),button:e.jsx(B,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:s,icon:Is,mode:"ghost",ref:o}),menu:e.jsx(Cs,{padding:1,children:n.map((m,g)=>e.jsx(ba,{actionState:m,disabled:s,index:g,onAction:d},g))}),popover:h,ref:c}),p&&p.dialog&&e.jsx(ze,{zOffset:"paneFooter",children:e.jsx(We,{dialog:p.dialog,referenceElement:l})})]})}function ba(t){const{actionState:n,disabled:s,index:a,onAction:o}=t,{onHandle:i}=n,r=u.useCallback(()=>{o(a),i&&i()},[a,o,i]),l=n.title&&e.jsx(E,{padding:2,children:e.jsx(D,{size:1,children:n.title})});return e.jsx(Es,{"data-testid":"action-".concat(n.label.replace(" ","")),disabled:s||!!n.disabled,onClick:r,padding:0,tone:n.tone,children:e.jsx(q,{content:l,disabled:!l,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:e.jsxs(z,{align:"center",paddingX:3,children:[e.jsxs(z,{flex:1,paddingY:3,children:[n.icon&&e.jsx(E,{marginRight:3,children:e.jsxs(D,{children:[u.isValidElement(n.icon)&&n.icon,Ds.isValidElementType(n.icon)&&u.createElement(n.icon)]})}),e.jsx(D,{children:n.label})]}),n.shortcut&&e.jsx(E,{marginLeft:3,children:e.jsx(Fn,{keys:String(n.shortcut).split("+").map(c=>c.slice(0,1).toUpperCase()+c.slice(1))})})]})})})}function tt(t){const{disabled:n,showMenu:s,states:a}=t,[o,...i]=a,[r,l]=u.useState(null),c=u.useMemo(()=>!o||!o.title&&!o.shortcut?null:e.jsxs(z,{padding:2,style:{maxWidth:300},align:"center",children:[e.jsx(D,{size:1,children:o.title}),o.shortcut&&e.jsx(E,{marginLeft:o.title?2:0,children:e.jsx(Fn,{keys:String(o.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[o]);return e.jsxs(z,{children:[o&&e.jsx(ss,{zOffset:200,children:e.jsx(q,{disabled:!c,content:c,portal:!0,placement:"top",children:e.jsx(H,{flex:1,children:e.jsx(B,{"data-testid":"action-".concat(o.label),disabled:n||!!o.disabled,icon:o.icon,onClick:o.onHandle,ref:l,text:o.label,tone:o.tone||"primary"})})})}),s&&i.length>0&&e.jsx(E,{marginLeft:1,children:e.jsx(ga,{actionStates:i,disabled:n})}),o&&o.dialog&&e.jsx(We,{dialog:o.dialog,referenceElement:r})]})}const va=u.memo(function(){const{actions:n,connectionState:s,documentId:a,editState:o}=L();return!n||!o?null:e.jsx(Be,{actions:n,actionProps:o,children:i=>{let{states:r}=i;return e.jsx(tt,{disabled:s!=="connected",showMenu:n.length>1,states:r},a)}})}),ja=u.memo(function(){const{connectionState:n,editState:s,timelineStore:a}=L(),o=de(a,d=>d.revTime),i=(o==null?void 0:o.id)||"",r=((s==null?void 0:s.draft)||(s==null?void 0:s.published)||{})._rev===i,l=u.useMemo(()=>({...s||{},revision:i}),[s,i]),c=u.useMemo(()=>[Tt],[]);return e.jsx(Be,{actions:c,actionProps:l,children:d=>{let{states:h}=d;return e.jsx(tt,{disabled:n!=="connected"||!!r,showMenu:!1,states:h})}})}),ya={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function _a(t){let{states:n}=t;return e.jsx(Ts,{space:1,children:n.map((s,a)=>e.jsx(q,{content:s.title&&e.jsx(E,{padding:2,children:e.jsx(D,{size:1,children:s.title})}),disabled:!s.title,placement:"top",portal:!0,children:e.jsx(Rs,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:s.color?ya[s.color]:void 0,style:{whiteSpace:"nowrap"},children:s.label})},String(a)))})}function Pa(){const{badges:t,editState:n}=L();return!n||!t?null:e.jsx(Vs,{badges:t,badgeProps:n,children:s=>{let{states:a}=s;return e.jsx(_a,{states:a})}})}var hn=Object.freeze,wa=Object.defineProperty,Sa=(t,n)=>hn(wa(t,"raw",{value:hn(n||t.slice())})),fn;const Ia=A(z)(fn||(fn=Sa([`
  cursor: default;
`])));function Ca(t){const{collapsed:n,disabled:s,lastPublished:a,lastUpdated:o,liveEdit:i}=t,r=F(a||"",{minimal:!0,agoSuffix:!0}),l=F(a||"",{minimal:!0}),c=F(o||"",{minimal:!0,agoSuffix:!0}),d=F(o||"",{minimal:!0}),h=F(o||"",{minimal:!1,agoSuffix:!0}),p=F(a||"",{minimal:!1,agoSuffix:!0}),m=i?"Last updated ".concat(h):"Last published ".concat(p);return e.jsx(Ia,{align:"center","data-ui":"SessionLayout",sizing:"border",children:e.jsx(q,{placement:"top",portal:!0,content:e.jsx(H,{padding:3,space:3,children:e.jsx(D,{size:1,children:i?e.jsxs(e.Fragment,{children:["Last updated"," ",e.jsx("abbr",{"aria-label":o?h:p,children:o?c:r})]}):e.jsxs(e.Fragment,{children:["Last published ",e.jsx("abbr",{"aria-label":p,children:r})]})})}),children:e.jsx(B,{mode:"bleed",tone:i?"critical":"positive",tabIndex:-1,disabled:s,"aria-label":m,children:e.jsxs(z,{align:"center",children:[e.jsx(E,{marginRight:n?0:3,children:e.jsx(D,{size:2,"aria-hidden":"true",children:i?e.jsx(os,{}):e.jsx(as,{})})}),!n&&e.jsx(D,{size:1,weight:"medium",children:i?e.jsx("abbr",{"aria-label":m,children:o?d:l}):e.jsx("abbr",{"aria-label":m,children:l})})]})})})})}var mn=Object.freeze,Ea=Object.defineProperty,Ne=(t,n)=>mn(Ea(t,"raw",{value:mn(n||t.slice())})),xn,gn,bn;const Da=A(se.path)(xn||(xn=Ne([`
  transform-origin: center;
`]))),Ta=t=>e.jsx(se.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Ra=t=>e.jsx(Da,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),Ma=t=>e.jsx(se.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),ka=t=>e.jsx(se.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),Oa=Rt(gn||(gn=Ne([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),za=A.g(bn||(bn=Ne([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),Oa),La={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},Aa={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},Ba={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},Wa={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},Na={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function Fa(t){const{status:n}=t;return n?e.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:e.jsxs(se.g,{variants:La,initial:n,animate:n,children:[e.jsxs(za,{"data-rotate":n==="changes"?void 0:"",children:[e.jsx(Ra,{variants:Ba,initial:n,animate:n}),e.jsx(Ta,{variants:Aa,initial:n,animate:n})]}),e.jsx(Ma,{variants:Wa,initial:n,animate:n}),e.jsx(ka,{variants:Na,initial:n,animate:n})]})}):null}const $a=Oe.forwardRef(function(n,s){const{collapsed:a,status:o,lastUpdated:i,...r}=n,l=F(i||"",{minimal:!0}),c=F(i||"",{minimal:!0,agoSuffix:!0}),d=F(i||"",{minimal:!1,agoSuffix:!0}),h=u.useMemo(()=>o==="syncing"?{text:"Saving...",tone:void 0}:o==="changes"?{text:l,tone:"caution"}:o==="saved"?{text:"Saved!",tone:"positive"}:{},[o,l]);return o?e.jsx(q,{placement:"top",portal:!0,disabled:o!=="changes",content:e.jsxs(H,{padding:3,space:3,children:[e.jsx(D,{size:1,weight:"semibold",children:"Review changes"}),e.jsxs(D,{size:1,muted:!0,children:["Changes saved ",e.jsx("abbr",{"aria-label":d,children:c})]})]}),children:e.jsx(B,{mode:"bleed",justify:"flex-start",tone:h==null?void 0:h.tone,...r,"data-testid":"review-changes-button",ref:s,"aria-label":"Review changes",children:e.jsxs(z,{align:"center",children:[e.jsx(E,{marginRight:a?0:3,"aria-hidden":"true",children:e.jsx(D,{children:e.jsx(Fa,{status:o})})}),!a&&e.jsx(D,{size:1,weight:"medium",children:h==null?void 0:h.text})]})})}):null}),Ha=Oe.memo($a),Va=1e3,Ua=3e3,Ga=u.memo(function(){var n;const{changesOpen:s,documentId:a,documentType:o,editState:i,onHistoryClose:r,onHistoryOpen:l,timelineStore:c,value:d}=L(),h=Mt(a,o),p=d==null?void 0:d._updatedAt,m=(n=i==null?void 0:i.published)==null?void 0:n._updatedAt,g=!!(i!=null&&i.liveEdit),b=!!(i!=null&&i.published),j=!!(i!=null&&i.draft),[y,x]=u.useState(null),f=ue(y),v=!f||(f==null?void 0:f.width)<300,[_,P]=u.useState(null),I=de(c,w=>w.onOlderRevision);u.useEffect(()=>{if(_==="syncing"&&!h.isSyncing){const w=setTimeout(()=>P("saved"),Va);return()=>clearTimeout(w)}if(_==="saved"){const w=setTimeout(()=>P(null),Ua);return()=>clearTimeout(w)}},[_,p,h.isSyncing]),u.useLayoutEffect(()=>{P(null)},[a]),u.useLayoutEffect(()=>{h.isSyncing&&P("syncing")},[h.isSyncing,p]);const T=u.useMemo(()=>e.jsx(Ha,{lastUpdated:p,status:_||(j?"changes":void 0),onClick:s?r:l,disabled:I,selected:s,collapsed:v}),[j,s,r,l,p,I,_,v]),S=u.useMemo(()=>(g||b)&&e.jsx(E,{marginRight:1,children:e.jsx(Ca,{disabled:I,lastPublished:m,lastUpdated:p,liveEdit:g,collapsed:v})}),[v,m,p,g,b,I]);return e.jsxs(z,{align:"center","data-ui":"DocumentSparkline",ref:x,children:[S,e.jsxs(z,{align:"center",flex:1,children:[T,!v&&e.jsx(E,{marginLeft:3,children:e.jsx(Pa,{})})]})]})});var vn=Object.freeze,Ka=Object.defineProperty,Xa=(t,n)=>vn(Ka(t,"raw",{value:vn(n||t.slice())})),jn;const Ya=A(E)(jn||(jn=Xa([`
  min-width: 10em;
  max-width: 16em;
`])));function Ja(t){const{actionsBoxRef:n}=t,{badges:s,timelineStore:a}=L(),o=de(a,i=>i.onOlderRevision);return u.useMemo(()=>e.jsx(E,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:e.jsxs(z,{align:"center",children:[e.jsx(E,{flex:[1,2],children:s&&e.jsx(Ga,{})}),e.jsx(Ya,{flex:1,marginLeft:[1,3],ref:n,children:o?e.jsx(ja,{}):e.jsx(va,{})})]})}),[n,s,o])}function qa(t){const{actionsBoxElement:n,activeIndex:s,as:a="div",children:o,id:i,onActionStart:r,onKeyDown:l,rootRef:c,states:d,...h}=t,p=d[s],m=u.useCallback(g=>{const b=d.filter(y=>y.shortcut&&zn(y.shortcut,g)),j=b[0];if(b.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(j.shortcut,'"')),j&&!j.disabled&&j.onHandle){g.preventDefault(),j.onHandle(),r(d.indexOf(j));return}l&&l(g)},[r,l,d]);return u.createElement(a,{id:i,onKeyDown:m,tabIndex:-1,...h,ref:c},[o,p&&p.dialog&&e.jsx(ze,{zOffset:"paneFooter",children:e.jsx(We,{dialog:p.dialog,referenceElement:n})})])}const st=Oe.memo(t=>{const{actionsBoxElement:n,as:s="div",children:a,...o}=t,{actions:i,editState:r}=L(),[l,c]=u.useState(-1),d=u.useCallback(p=>{c(p)},[]),h=u.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!h||!i?null:e.jsx(Be,{actionProps:h,actions:i,children:p=>{let{states:m}=p;return e.jsx(qa,{...o,activeIndex:l,actionsBoxElement:n,as:s,onActionStart:d,states:m,children:a})}})});st.displayName="DocumentActionShortcuts";var yn=Object.freeze,Za=Object.defineProperty,Qa=(t,n)=>yn(Za(t,"raw",{value:yn(n||t.slice())})),_n;const Pn=["fixed","absolute"],er=A(kt)(_n||(_n=Qa([`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`]))),fr=u.memo(function(n){const{name:s}=Rn();return e.jsx(Mn,{name:n.pane.source||s,children:e.jsx(nr,{...n})})});function nr(t){var n;const{pane:s,paneKey:a}=t,{resolveNewDocumentOptions:o}=Rn().document,i=ce(),r=tr(s.options,i.params),{documentType:l,isLoaded:c}=Ot(r.id,r.type),d=u.useMemo(()=>o({type:"document",documentId:r.id,schemaType:r.type}),[r.id,r.type,o]),[h,p]=zt({templateItems:d}),m=c&&!p,g=u.useMemo(()=>m&&l&&r.type!==l?sr(t,r,l):t,[t,l,m,r]),{ReferenceChildLink:b,handleEditReference:j,groupIndex:y,routerPanesState:x}=i,f=((n=x[y+1])==null?void 0:n[0].params)||{},v=x.length,{parentRefPath:_}=f,P=u.useMemo(()=>_?{path:ye(_),state:y>=v-1?"none":y>=v-2?"selected":"pressed"}:{path:[],state:"none"},[_,y,v]);return r.type==="*"&&!m?e.jsx(ee,{flex:2.5,minWidth:320,paneKey:a,title:"Loading document…"}):l?e.jsx(Lt,{...g,children:e.jsx(At,{EditReferenceLinkComponent:b,onEditReference:j,initialValueTemplateItems:h,activePath:P,children:e.jsx(or,{})})},"".concat(l,"-").concat(r.id)):e.jsx(Jn,{flex:2.5,minWidth:320,paneKey:a,title:e.jsx(e.Fragment,{children:"The document was not found"}),children:e.jsx(H,{space:4,children:e.jsxs(D,{as:"p",children:["The document type is not defined, and a document with the ",e.jsx("code",{children:r.id})," ","identifier could not be found."]})})})}function tr(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Bt();return u.useMemo(()=>{if(t.type&&t.type!=="*")return t;const a=t.template||n.template,o=a?s.find(r=>r.id===a):void 0,i=o==null?void 0:o.schemaType;return i?{...t,type:i}:t},[t,n.template,s])}function sr(t,n,s){return{...t,pane:{...t.pane,options:{...n,type:s}}}}function or(){const{changesOpen:t,documentType:n,inspector:s,inspectOpen:a,onFocus:o,onPathOpen:i,onHistoryOpen:r,onKeyUp:l,paneKey:c,schemaType:d,value:h}=L(),{collapsed:p}=kn(),m=Wt(),[g,b]=u.useState(null),[j,y]=u.useState(null),[x,f]=u.useState(null),[v,_]=u.useState(null),P=ue(j),I=P==null?void 0:P.height,T=u.useCallback(R=>{i(R),o(R)},[i,o]),S=rs+(s?Se:0),w=is+(s?Se:0);return d?e.jsxs(st,{actionsBoxElement:x,as:ie,currentMinWidth:S,"data-testid":"document-pane",flex:2.5,id:c,minWidth:w,onKeyUp:l,rootRef:b,children:[e.jsx(Fe,{position:Pn,zOffset:m.portal,children:e.jsx(z,{direction:"column",flex:1,height:p?void 0:"fill",children:e.jsx(er,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:r,onSetFocus:T,children:e.jsx(da,{footerHeight:I||null,isInspectOpen:a,rootElement:g,setDocumentPanelPortalElement:_})})})}),e.jsx(pe,{__unstable_elements:{[On]:v},children:e.jsx(Fe,{position:Pn,zOffset:m.portal,children:e.jsx(Ft,{ref:y,children:e.jsx(Ja,{actionsBoxRef:f})})})}),e.jsx(Ro,{})]}):e.jsx(Jn,{currentMinWidth:S,flex:2.5,minWidth:w,paneKey:c,title:e.jsxs(e.Fragment,{children:["Unknown document type: ",e.jsx("code",{children:n})]}),tone:"caution",children:e.jsxs(H,{space:4,children:[n&&e.jsxs(D,{as:"p",children:["This document has the schema type ",e.jsx("code",{children:n}),", which is not defined as a type in the local content studio schema."]}),!n&&e.jsx(D,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),Nt]})})}function ar(){return e.jsx(G,{height:"fill",children:e.jsx(z,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:e.jsx(te,{width:0,children:e.jsx(G,{padding:4,radius:2,shadow:1,tone:"caution",children:e.jsxs(z,{children:[e.jsx(E,{children:e.jsx(D,{size:1,children:e.jsx(En,{})})}),e.jsxs(H,{flex:1,marginLeft:3,space:3,children:[e.jsx(D,{as:"h1",size:1,weight:"bold",children:"No document types"}),e.jsx(D,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),e.jsx(D,{as:"p",muted:!0,size:1,children:e.jsx("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}var wn=Object.freeze,rr=Object.defineProperty,ir=(t,n)=>wn(rr(t,"raw",{value:wn(n||t.slice())})),Sn;const lr=A(qs)(Sn||(Sn=ir([`
  min-height: 100%;
  min-width: 320px;
`]))),cr=zn("mod+s"),dr=u.memo(function(n){let{onPaneChange:s}=n;var a;const{push:o}=Re(),i=$t(),{layoutCollapsed:r,setLayoutCollapsed:l}=J(),{paneDataItems:c,resolvedPanes:d}=uo(),h=Te(u.useCallback(y=>typeof y.intent=="string",[])),[p,m]=u.useState(null),g=u.useCallback(()=>l(!0),[l]),b=u.useCallback(()=>l(!1),[l]);return u.useEffect(()=>{d.length&&s(d)},[s,d]),u.useEffect(()=>{const y=x=>{cr(x)&&(x.preventDefault(),o({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[o]),((a=i._original)==null?void 0:a.types.some(Ht))?e.jsxs(pe,{element:p||null,children:[e.jsxs(lr,{flex:1,height:r?void 0:"fill",minWidth:512,onCollapse:g,onExpand:b,children:[c.map(y=>{let{active:x,childItemId:f,groupIndex:v,itemId:_,key:P,pane:I,index:T,params:S,path:w,payload:R,siblingIndex:M,selected:O}=y;return e.jsx(u.Fragment,{children:I===Pe?e.jsx(ee,{paneKey:P,path:w,selected:O}):e.jsx(Co,{active:x,groupIndex:v,index:T,pane:I,childItemId:f,itemId:_,paneKey:P,params:S,payload:R,path:w,selected:O,siblingIndex:M})},"".concat(I===Pe?"loading":I.type,"-").concat(T))}),c.length<=1&&h&&e.jsx(ee,{paneKey:"intent-resolver"})]}),e.jsx("div",{"data-portal":"",ref:m})]}):e.jsx(ar,{})});function ur(t){let{tool:{options:n}}=t;const{unstable_sources:s}=ls(),[a]=s,{source:o,defaultDocumentNode:i,structure:r}=n||{};u.useEffect(()=>(xe([]),()=>xe([])),[]);const[{error:l},c]=u.useState({error:null});return l?e.jsx(vo,{error:l}):e.jsx(cs,{onCatch:c,children:e.jsx(Mn,{name:o||a.name,children:e.jsxs(ds,{defaultDocumentNode:i,structure:r,children:[e.jsx(dr,{onPaneChange:xe}),e.jsx(fo,{})]})})})}var mr=Object.freeze({__proto__:null,default:ur});export{fr as DocumentPane,mr as index,Mo as useDeskToolSetting};
